<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–ó–∏–º–∞ –¥–ª—è –∫–≤—ñ—Ç–∫–∏: –°–µ—Ä—Ü–µ, –ü—Ä–∏–Ω—Ü–µ—Å–∞ —ñ –ü–æ—Ü—ñ–ª—É–Ω–∫–∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <style>
    /* ==========================
       –ë–∞–∑–æ–≤–µ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏
       ========================== */
    html, body {
      margin: 0; padding: 0;
      width: 100%; height: 100%;
      overflow: hidden;
      background-color: #f0eee9; /* —Å–≤—ñ—Ç–ª–∏–π —Ñ–æ–Ω */
      /* ¬´–ë—Ä—É–¥–Ω–∏–π¬ª —à—É–º–æ–≤–∏–π –µ—Ñ–µ–∫—Ç */
      background-image: url("data:image/svg+xml,%3Csvg width='300' height='300' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.4' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.1'/%3E%3C/svg%3E");
      background-repeat: repeat;
      background-size: 300px 300px;
      position: relative;
      font-family: sans-serif;
    }
    #canvas {
      display: block;
      position: absolute; 
      top: 0; left: 0;
      z-index: 1;
    }

    /* –í–µ—Ä—Ö–Ω—è –ø–∞–Ω–µ–ª—å (–ª—ñ—á–∏–ª—å–Ω–∏–∫ –∑—ñ–±—Ä–∞–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤) */
    .top-panel {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: rgba(255,255,255,0.6);
      padding: 8px;
      text-align: center;
      font-size: 1rem;
      color: #c33;
      font-weight: bold;
      z-index: 10;
    }

    /* –ü—Ä–∏–Ω—Ü–µ—Å–∞ (–≤–Ω–∏–∑—É –ª—ñ–≤–æ—Ä—É—á, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥) */
    .princess {
      position: fixed;
      bottom: 0; 
      left: 10px;
      width: 100px; /* –≤–∏ –º–æ–∂–µ—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä */
      z-index: 10;
      opacity: 0.9; /* —Ç—Ä—ñ—à–∫–∏ –ø—Ä–æ–∑–æ—Ä–æ—Å—Ç—ñ */
    }

  </style>
</head>
<body>
  <!-- –ü–∞–Ω–µ–ª—å –∑ –ª—ñ—á–∏–ª—å–Ω–∏–∫–æ–º -->
  <div class="top-panel">
    <span id="collectedCount">–ó—ñ–±—Ä–∞–Ω–æ: 0</span>
  </div>

  <!-- –ü—Ä–∏–Ω—Ü–µ—Å–∞ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∞–±–æ emoji) -->
  <!-- –¢—É—Ç –º–æ–∂–Ω–∞ –ø—ñ–¥—Å—Ç–∞–≤–∏—Ç–∏ —ñ–Ω—à–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ PNG —á–∏ GIF -->
  <img class="princess" src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Female_Fairy_Tales_Princess.png/128px-Female_Fairy_Tales_Princess.png" alt="–ü—Ä–∏–Ω—Ü–µ—Å–∞" />

  <!-- –ü–æ–ª–æ—Ç–Ω–æ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è —Å–µ—Ä—Ü—è —Ç–∞ ¬´—Å–Ω—ñ–≥–æ-–∫–≤—ñ—Ç—ñ–≤-–ø–æ—Ü—ñ–ª—É–Ω–∫—ñ–≤¬ª -->
  <canvas id="canvas"></canvas>

  <script>
    /****************************************************************
     * 1) –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Canvas
     ****************************************************************/
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    let cw = window.innerWidth;
    let ch = window.innerHeight;
    canvas.width = cw;
    canvas.height = ch;

    window.addEventListener("resize", () => {
      cw = window.innerWidth;
      ch = window.innerHeight;
      canvas.width = cw;
      canvas.height = ch;
    });

    /****************************************************************
     * 2) –ì–æ–ª–æ–≤–Ω–∏–π –ø–µ—Ä—Å–æ–Ω–∞–∂ - –°–ï–†–¶–ï
     ****************************************************************/
    let heartX = cw / 2;
    let heartY = ch / 2;
    const speed = 4;
    // –ö–µ—Ä—É–≤–∞–Ω–Ω—è
    const keys = {
      ArrowUp:false, ArrowDown:false, ArrowLeft:false, ArrowRight:false,
      w:false, a:false, s:false, d:false
    };
    window.addEventListener("keydown", e => {
      if(keys.hasOwnProperty(e.key)) keys[e.key] = true;
    });
    window.addEventListener("keyup", e => {
      if(keys.hasOwnProperty(e.key)) keys[e.key] = false;
    });

    function updateHeart() {
      if(keys.ArrowUp || keys.w)    heartY -= speed;
      if(keys.ArrowDown || keys.s)  heartY += speed;
      if(keys.ArrowLeft || keys.a)  heartX -= speed;
      if(keys.ArrowRight|| keys.d)  heartX += speed;

      // –º–µ–∂—ñ
      if(heartX < 0)   heartX = 0;
      if(heartX > cw)  heartX = cw;
      if(heartY < 0)   heartY = 0;
      if(heartY > ch)  heartY = ch;
    }

    // –ú–∞–ª—é–≤–∞–Ω–Ω—è —Å–µ—Ä—Ü—è (–ø–æ–¥—ñ–±–Ω–æ –¥–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥—É)
    function drawHeart(x, y, size=30) {
      ctx.save();
      ctx.translate(x, y);
      ctx.beginPath();
      const topCurveHeight = size * 0.3;
      ctx.moveTo(0, size);
      // –õ—ñ–≤–∞ –¥—É–≥–∞
      ctx.bezierCurveTo(-size*0.5, size - topCurveHeight, -size, topCurveHeight, -size*0.5, 0);
      // –ü—Ä–∞–≤–∞ –¥—É–≥–∞
      ctx.bezierCurveTo(0, -topCurveHeight, size*0.5, -topCurveHeight, size*0.5, 0);
      ctx.bezierCurveTo(size, topCurveHeight, size*0.5, size - topCurveHeight, 0, size);

      ctx.fillStyle = "#ff3366";
      ctx.fill();
      ctx.restore();
    }

    /****************************************************************
     * 3) –ï–ª–µ–º–µ–Ω—Ç–∏, —â–æ ¬´–ø–∞–¥–∞—é—Ç—å¬ª (–∫–≤—ñ—Ç–∏, —Å–Ω—ñ–∂–∏–Ω–∫–∏, –ø–æ—Ü—ñ–ª—É–Ω–∫–∏ —Ç–æ—â–æ)
     ****************************************************************/
    // –¢–∏–ø–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:
    // - "snow"  => —Å–Ω—ñ–∂–∏–Ω–∫–∏ (–ø—É–ª—å—Å—É–≤–∞—Ç–∏–º—É—Ç—å)
    // - "flower" => –º–∞–ª–µ–Ω—å–∫—ñ –∫–≤—ñ—Ç–æ—á–∫–∏
    // - "kiss" => –ø–æ—Ü—ñ–ª—É–Ω–æ–∫ (emoji "üíã")
    // - "doodle" => —ñ–Ω—à—ñ –¥–æ–≤—ñ–ª—å–Ω—ñ –≤—ñ–∑–µ—Ä—É–Ω–∫–∏
    // –í–∏ –º–æ–∂–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ –≤–∞—Ä—ñ–∞—Ü—ñ–π
    const ITEM_TYPES = ["snow", "flower", "kiss", "doodle"];

    const items = [];
    const ITEM_COUNT = 50;  // —Å–∫—ñ–ª—å–∫–∏ –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
    // –∑—ñ–±—Ä–∞–Ω–æ
    let collected = 0;

    function spawnItems() {
      for(let i=0; i<ITEM_COUNT; i++){
        items.push(createItem());
      }
    }

    function createItem() {
      const type = randomChoice(ITEM_TYPES);
      const x = Math.random()*cw;
      // –ø–æ—á–Ω–µ–º–æ —Ç—Ä—ñ—à–∫–∏ –≤–∏—â–µ –µ–∫—Ä–∞–Ω—É
      const y = - Math.random()*ch;
      // —à–≤–∏–¥–∫—ñ—Å—Ç—å –ø–∞–¥—ñ–Ω–Ω—è
      const vy = 1 + Math.random()*2;
      // –¥—Ä–µ–π—Ñ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—ñ
      const vx = (Math.random()-0.5)*1;
      // —Ä–æ–∑–º—ñ—Ä
      const size = 10 + Math.random()*15;

      // –î–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø–æ—è–≤–∏: –∑—Ä–æ–±–∏–º–æ –ø–æ—á–∞—Ç–∫–æ–≤—É ¬´scale¬ª
      const spawnScale = 0.1;  // –¥—É–∂–µ –º–∞–ª–µ–Ω—å–∫–∏–π
      // –∑ —á–∞—Å–æ–º –Ω–∞—Ä–æ—â—É–≤–∞—Ç–∏–º–µ–º–æ
      const growthRate = 0.02 + Math.random()*0.03;

      return {
        x, y, vx, vy,
        type,
        size,
        scale: spawnScale,   // –ø–æ—Ç–æ—á–Ω–∏–π –º–∞—Å—à—Ç–∞–±
        grow: growthRate,    // –Ω–∞ —Å–∫—ñ–ª—å–∫–∏ –∑–±—ñ–ª—å—à—É—î–º–æ scale –≤ –∫–æ–∂–Ω–æ–º—É –∫–∞–¥—Ä—ñ
        pulseOffset: Math.random()*1000, // –¥–ª—è ¬´–ø—É–ª—å—Å–∞—Ü—ñ—ó¬ª —Å–Ω—ñ–∂–∏–Ω–æ–∫
        collected: false
      };
    }

    function updateItems() {
      for(let i=0; i<items.length; i++){
        const it = items[i];
        if(it.collected) continue;

        // –∑—Ä–æ—Å—Ç–∞–Ω–Ω—è (–∞–Ω—ñ–º–∞—Ü—ñ—è –ø–æ—è–≤–∏)
        if(it.scale < 1) {
          it.scale += it.grow;
          if(it.scale > 1) it.scale = 1;
        }

        // —Ä—É—Ö
        it.x += it.vx;
        it.y += it.vy;

        // –æ—Å–æ–±–ª–∏–≤–∞ –ø—É–ª—å—Å–∞—Ü—ñ—è –¥–ª—è ¬´snow¬ª
        if(it.type === "snow") {
          it.pulseOffset += 0.06;
        }

        // —è–∫—â–æ –Ω–∏–∂—á–µ –∫—Ä–∞—é - –ø–µ—Ä–µ–Ω–µ—Å–µ–º–æ –≤–≥–æ—Ä—É
        if(it.y > ch + it.size*2) {
          // –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–º–æ
          items[i] = createItem();
          continue;
        }

        // –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∑—ñ—Ç–∫–Ω–µ–Ω–Ω—è –∑ —Å–µ—Ä—Ü–µ–º
        const dx = it.x - heartX;
        const dy = it.y - heartY;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if(dist < it.size + 20) {
          it.collected = true;
          collected++;
          document.getElementById('collectedCount').textContent = `–ó—ñ–±—Ä–∞–Ω–æ: ${collected}`;
        }
      }
    }

    function drawItems() {
      for(let i=0; i<items.length; i++){
        const it = items[i];
        if(it.collected) continue;
        drawItem(it);
      }
    }

    // –§—É–Ω–∫—Ü—ñ—è –º–∞–ª—é–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ —Ç–∏–ø–æ–º
    function drawItem(it) {
      ctx.save();
      ctx.translate(it.x, it.y);
      // –∑–±—ñ–ª—å—à–∏–º–æ –Ω–∞ it.scale
      ctx.scale(it.scale, it.scale);

      switch(it.type){
        case "snow":
          // –±—ñ–ª—ñ –∫–æ–ª–∞, —â–æ –ø—É–ª—å—Å—É—é—Ç—å
          const pulse = 1 + Math.sin(it.pulseOffset)*0.2; 
          ctx.beginPath();
          ctx.arc(0, 0, it.size * pulse, 0, Math.PI*2);
          ctx.fillStyle = "#fff";
          ctx.fill();
          break;

        case "flower":
          // —Å–∏–º–≤–æ–ª ¬´üå∏¬ª (–∞–±–æ —ñ–Ω—à–∞ –∫–≤—ñ—Ç–∫–∞)
          ctx.font = `${it.size*2}px sans-serif`;
          ctx.fillText("üå∏", -it.size, it.size/2);
          break;

        case "kiss":
          // –ø–æ—Ü—ñ–ª—É–Ω–æ–∫ ¬´üíã¬ª
          ctx.font = `${it.size*2}px sans-serif`;
          ctx.fillText("üíã", -it.size, it.size/2);
          break;

        case "doodle":
          // –ø—Ä–æ—Å—Ç–∏–π –≤—ñ–∑–µ—Ä—É–Ω–æ–∫: –∑—ñ—Ä–∫–∞, scribble —Ç–æ—â–æ
          drawDoodle(it.size);
          break;
      }

      ctx.restore();
    }

    function drawDoodle(r) {
      ctx.strokeStyle = randomColor();
      ctx.lineWidth = 2;
      ctx.beginPath();
      let px=0, py=0;
      ctx.moveTo(px,py);
      for(let i=0;i<5;i++){
        px += randomRange(-r, r);
        py += randomRange(-r, r);
        ctx.lineTo(px,py);
      }
      ctx.stroke();
    }

    /****************************************************************
     * 4) –û—Å–Ω–æ–≤–Ω–∏–π —Ü–∏–∫–ª (–∞–Ω—ñ–º–∞—Ü—ñ—è)
     ****************************************************************/
    function animate() {
      requestAnimationFrame(animate);
      ctx.clearRect(0,0,cw,ch);

      // –û–Ω–æ–≤–∏—Ç–∏ —Å–µ—Ä—Ü–µ
      updateHeart();
      drawHeart(heartX, heartY, 30);

      // –û–Ω–æ–≤–∏—Ç–∏ —Ç–∞ –Ω–∞–º–∞–ª—é–≤–∞—Ç–∏ –ø–∞–¥–∞—é—á—ñ –µ–ª–µ–º–µ–Ω—Ç–∏
      updateItems();
      drawItems();
    }

    /****************************************************************
     * 5) –î–æ–ø–æ–º—ñ–∂–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
     ****************************************************************/
    function randomRange(min, max) {
      return Math.random()*(max-min)+min;
    }
    function randomChoice(arr) {
      return arr[Math.floor(Math.random()*arr.length)];
    }
    function randomColor() {
      const h = Math.floor(Math.random()*360);
      const s = 60 + Math.random()*40;
      const l = 40 + Math.random()*40;
      return `hsl(${h},${s}%,${l}%)`;
    }

    /****************************************************************
     * 6) –°—Ç–∞—Ä—Ç
     ****************************************************************/
    function init() {
      spawnItems();
      requestAnimationFrame(animate);
    }
    init();
  </script>
</body>
</html>
